{% extends 'base.html' %}

{% block content %}
<div style="max-width: 1400px; margin: 0 auto;">

    <div style="background: white; padding: 25px; border-radius: 16px; margin-bottom: 25px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; border: 1px solid #e0e6ed;">
        <div>
            <h2 style="margin: 0; color: var(--primary); font-size: 2rem; font-weight: 800;">
                üì¶ Mes Commandes
            </h2>
            <p style="margin: 5px 0 0 0; color: #6c757d;">Historique de vos achats et factures</p>
        </div>
        <button onclick="window.print()" class="btn-primary" style="width: auto; padding: 12px 24px; background: #6c757d;">
            üñ®Ô∏è Imprimer
        </button>
    </div>

    <div style="background: white; padding: 25px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); overflow-x: auto; border: 1px solid #e0e6ed;">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white;">
                    <th style="padding: 15px; text-align: left; font-weight: 700; border-radius: 8px 0 0 8px;">N¬∞ Facture</th>
                    <th style="padding: 15px; text-align: left; font-weight: 700;">Produit</th>
                    <th style="padding: 15px; text-align: left; font-weight: 700;">Date</th>
                    <th style="padding: 15px; text-align: left; font-weight: 700;">Adresse de Livraison</th>
                    <th style="padding: 15px; text-align: right; font-weight: 700; border-radius: 0 8px 8px 0;">Montant</th>
                </tr>
            </thead>
            <tbody>
                {% for c in commandes %}
                <tr style="border-bottom: 1px solid #e0e6ed; transition: background 0.3s ease;"
                    onmouseover="this.style.background='#f8f9fa'"
                    onmouseout="this.style.background='white'">
                    
                    <td style="padding: 15px; font-weight: 700; color: var(--primary);">
                        #{{ c.id }}
                    </td>
                    
                    <td style="padding: 15px;">
                        <strong style="color: #333;">{{ c.nom_produit or c.produit }}</strong>
                        <div style="font-size: 0.8rem; color: #6c757d;">{{ c.description }}</div>
                    </td>
                    
                    <td style="padding: 15px; color: #6c757d; font-size: 0.9rem;">
                        {{ c.date_commande }}
                    </td>
                    
                    <td style="padding: 15px; color: #6c757d;">
                        üìç {{ c.adresse_livraison }}
                    </td>
                    
                    <td style="padding: 15px; text-align: right; font-weight: 800; color: var(--primary); font-size: 1.1rem;">
                        {{ c.montant }} MRU
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        {% if commandes|length == 0 %}
        <div style="text-align: center; padding: 60px 20px; color: #6c757d;">
            <div style="font-size: 4rem; margin-bottom: 15px; opacity: 0.3;">üõí</div>
            <h3 style="color: var(--primary); margin-bottom: 10px;">Aucune commande</h3>
            <p>Vous n'avez pas encore effectu√© d'achat.</p>
            <a href="/" class="btn-primary" style="display: inline-block; margin-top: 15px; text-decoration: none;">
                Retour √† la boutique
            </a>
        </div>
        {% endif %}
    </div>
</div>

<style>
@media print {
    body * {
        visibility: hidden;
    }
    .main-layout, aside, nav {
        display: none;
    }
    .table-container, table, table * {
        visibility: visible;
    }
    table {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
    }
}
</style>
{% endblock %}